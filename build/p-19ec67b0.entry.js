import{r as t,h as e,c as r,F as n}from"./p-5331294a.js";const o=class{constructor(e){t(this,e)}render(){return e("div",null,e("main",null,e("sudoku-grid",null)))}};var i=Object.prototype.hasOwnProperty,u=Array.isArray,s=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r},c={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],i=o.obj[o.prop],s=Object.keys(i),a=0;a<s.length;++a){var c=s[a],l=i[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(e.push({obj:i,prop:c}),r.push(l))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(u(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,r){if(0===t.length)return t;var n=t;if("symbol"==typeof t?n=Symbol.prototype.toString.call(t):"string"!=typeof t&&(n=String(t)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var o="",i=0;i<n.length;++i){var u=n.charCodeAt(i);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122?o+=n.charAt(i):u<128?o+=s[u]:u<2048?o+=s[192|u>>6]+s[128|63&u]:u<55296||u>=57344?o+=s[224|u>>12]+s[128|u>>6&63]+s[128|63&u]:(u=65536+((1023&u)<<10|1023&n.charCodeAt(i+=1)),o+=s[240|u>>18]+s[128|u>>12&63]+s[128|u>>6&63]+s[128|63&u])}return o},isBuffer:function(t){return!(!t||"object"!=typeof t||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(u(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!=typeof r){if(u(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var o=e;return u(e)&&!u(r)&&(o=a(e,n)),u(e)&&u(r)?(r.forEach((function(r,o){if(i.call(e,o)){var u=e[o];u&&"object"==typeof u&&r&&"object"==typeof r?e[o]=t(u,r,n):e.push(r)}else e[o]=r})),e):Object.keys(r).reduce((function(e,o){var u=r[o];return e[o]=i.call(e,o)?t(e[o],u,n):u,e}),o)}},l=String.prototype.replace,f=/%20/g,d={RFC1738:"RFC1738",RFC3986:"RFC3986"},h=c.assign({default:d.RFC3986,formatters:{RFC1738:function(t){return l.call(t,f,"+")},RFC3986:function(t){return String(t)}}},d),p=Object.prototype.hasOwnProperty,y={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},b=Array.isArray,v=Array.prototype.push,w=function(t,e){v.apply(t,b(e)?e:[e])},g=Date.prototype.toISOString,m=h.default,j={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:c.encode,encodeValuesOnly:!1,format:m,formatter:h.formatters[m],indices:!1,serializeDate:function(t){return g.call(t)},skipNulls:!1,strictNullHandling:!1},O=function t(e,r,n,o,i,u,s,a,l,f,d,h,p){var y,v=e;if("function"==typeof s?v=s(r,v):v instanceof Date?v=f(v):"comma"===n&&b(v)&&(v=c.maybeMap(v,(function(t){return t instanceof Date?f(t):t})).join(",")),null===v){if(o)return u&&!h?u(r,j.encoder,p,"key"):r;v=""}if("string"==typeof(y=v)||"number"==typeof y||"boolean"==typeof y||"symbol"==typeof y||"bigint"==typeof y||c.isBuffer(v))return u?[d(h?r:u(r,j.encoder,p,"key"))+"="+d(u(v,j.encoder,p,"value"))]:[d(r)+"="+d(String(v))];var g,m=[];if(void 0===v)return m;if(b(s))g=s;else{var O=Object.keys(v);g=a?O.sort(a):O}for(var k=0;k<g.length;++k){var x=g[k],N=v[x];if(!i||null!==N){var E=b(v)?"function"==typeof n?n(r,x):r:r+(l?"."+x:"["+x+"]");w(m,t(N,E,n,o,i,u,s,a,l,f,d,h,p))}}return m},k=Object.prototype.hasOwnProperty,x=Array.isArray,N={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:c.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},E=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},S=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},C=function(t,e,r,n){if(t){var o=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,u=r.depth>0&&/(\[[^[\]]*])/.exec(o),s=u?o.slice(0,u.index):o,a=[];if(s){if(!r.plainObjects&&k.call(Object.prototype,s)&&!r.allowPrototypes)return;a.push(s)}for(var c=0;r.depth>0&&null!==(u=i.exec(o))&&c<r.depth;){if(c+=1,!r.plainObjects&&k.call(Object.prototype,u[1].slice(1,-1))&&!r.allowPrototypes)return;a.push(u[1])}return u&&a.push("["+o.slice(u.index)+"]"),function(t,e,r,n){for(var o=n?e:S(e,r),i=t.length-1;i>=0;--i){var u,s=t[i];if("[]"===s&&r.parseArrays)u=[].concat(o);else{u=r.plainObjects?Object.create(null):{};var a="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(a,10);r.parseArrays||""!==a?!isNaN(c)&&s!==a&&String(c)===a&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(u=[])[c]=o:u[a]=o:u={0:o}}o=u}return o}(a,e,r,n)}},R=function(t,e){var r,n=t,o=function(t){if(!t)return j;if(null!=t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||j.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=h.default;if(void 0!==t.format){if(!p.call(h.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=h.formatters[r],o=j.filter;return("function"==typeof t.filter||b(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:j.addQueryPrefix,allowDots:void 0===t.allowDots?j.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:j.charsetSentinel,delimiter:void 0===t.delimiter?j.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:j.encode,encoder:"function"==typeof t.encoder?t.encoder:j.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:j.encodeValuesOnly,filter:o,formatter:n,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:j.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:j.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:j.strictNullHandling}}(e);"function"==typeof o.filter?n=(0,o.filter)("",n):b(o.filter)&&(r=o.filter);var i=[];if("object"!=typeof n||null===n)return"";var u=y[e&&e.arrayFormat in y?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices"];r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);for(var s=0;s<r.length;++s){var a=r[s];o.skipNulls&&null===n[a]||w(i,O(n[a],a,u,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.formatter,o.encodeValuesOnly,o.charset))}var c=i.join(o.delimiter),l=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&(l+="iso-8859-1"===o.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),c.length>0?l+c:""};class I{static get isProduction(){return!0}static get isDevelopment(){return window.location.hostname.indexOf("localhost")>-1||!1}static get isTest(){return!1}}class B{}B.getQueryString=()=>I.isTest?"":window.location.search,B.getParsed=t=>function(t,e){var r=function(t){if(!t)return N;if(null!=t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===t.allowDots?N.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:N.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:N.arrayLimit,charset:void 0===t.charset?N.charset:t.charset,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:N.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:N.comma,decoder:"function"==typeof t.decoder?t.decoder:N.decoder,delimiter:"string"==typeof t.delimiter||c.isRegExp(t.delimiter)?t.delimiter:N.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:N.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:N.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:N.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:N.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:N.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof t?function(t,e){var r,n={},o=(e.ignoreQueryPrefix?t.replace(/^\?/,""):t).split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),i=-1,u=e.charset;if(e.charsetSentinel)for(r=0;r<o.length;++r)0===o[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===o[r]?u="utf-8":"utf8=%26%2310003%3B"===o[r]&&(u="iso-8859-1"),i=r,r=o.length);for(r=0;r<o.length;++r)if(r!==i){var s,a,l=o[r],f=l.indexOf("]="),d=-1===f?l.indexOf("="):f+1;-1===d?(s=e.decoder(l,N.decoder,u,"key"),a=e.strictNullHandling?null:""):(s=e.decoder(l.slice(0,d),N.decoder,u,"key"),a=c.maybeMap(S(l.slice(d+1),e),(function(t){return e.decoder(t,N.decoder,u,"value")}))),a&&e.interpretNumericEntities&&"iso-8859-1"===u&&(a=E(a)),l.indexOf("[]=")>-1&&(a=x(a)?[a]:a),n[s]=k.call(n,s)?c.combine(n[s],a):a}return n}(t,r):t,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),u=0;u<i.length;++u){var s=i[u],a=C(s,n[s],r,"string"==typeof t);o=c.merge(o,a,r)}return c.compact(o)}(t||B.getQueryString(),{ignoreQueryPrefix:!0})||{},B.set=t=>{let e=B.getParsed();return e=Object.assign(Object.assign({},e),t),B.apply(e)},B.getValue=(t,e)=>{var r;return null!==(r=B.getParsed()[t])&&void 0!==r?r:e},B.apply=t=>{const e=B.stringify(t);return I.isTest||window.history.replaceState({},"",`${window.location.pathname}${e?"?":""}${e}${window.location.hash}`),t},B.deleteKey=t=>{let e=B.getParsed();return delete e[t],B.apply(e)},B.stringify=t=>R(t,{encode:!1}),B.encodeObjUrl=t=>R(t,{encode:!0,encodeValuesOnly:!0});class D{constructor(t){this.isStaticValue=!1,this.guaranteedValue=!1,this.possibleValidValues=[],this.invalidValues=[],this.subgrid=0,t&&(this.value=t.value,this.isStaticValue=t.isStaticValue,this.guaranteedValue=t.guaranteedValue,this.possibleValidValues=t.possibleValidValues,this.invalidValues=t.invalidValues,this.subgrid=t.subgrid)}}class T{constructor(){this.maxCells=81}create(t){const e=B.getParsed(t),r=[];let n=1,o=1,i=1,u=1;for(let t=0;t<this.maxCells;t++)r[t]=new D,r[t].subgrid=u-1,o%3==0&&u++,o%9==0&&(u=i,n++,n%3==0&&(i+=3)),o++,e[t]&&(r[t].isStaticValue=!0,r[t].value=Number(e[t]));return r}}class P{static getHorizontalRowByRowIndex(t,e){const r=9*e;return t.slice(r,r+9)}static getVerticalRowByRowIndex(t,e){return t.filter(((t,r)=>r%9===e))}static getSubgridBySubgridIndex(t,e){return t.filter((t=>t.subgrid===e))}static getHorizontalNeighboursByCellIndex(t,e){const r=Math.floor(e/9),n=P.getHorizontalRowByRowIndex(t,r);return P.getNeighbours(t,n,e)}static getVerticalNeighboursByCellIndex(t,e){const r=Math.floor(e%9),n=P.getVerticalRowByRowIndex(t,r);return P.getNeighbours(t,n,e)}static getSubgridNeighboursByCellIndex(t,e){const r=P.getSubgridBySubgridIndex(t,t[e].subgrid);return P.getNeighbours(t,r,e)}static getNeighbours(t,e,r){return t[r].value&&(e=e.filter((e=>e.value!==t[r].value))),e.filter((t=>!!t.value))}}class _{constructor(){this.rowLength=9,this.maxCells=this.rowLength*this.rowLength,this.totalRowValue=45,this.maxCellValue=9,this.minCellValue=1}validateStartGrid(t){try{const e=B.getParsed(t),r=Object.keys(e).length>this.maxCells,n=!Object.keys(e).reduce(((t,e)=>this.maxValueReducer(t,e,this.maxCells-1)),!0),o=!Object.values(e).reduce(((t,e)=>this.maxValueReducer(t,e,this.maxCellValue,this.minCellValue)),!0);if(r)throw new Error("More than 81 cell values provided");if(n)throw new Error("No key may exceed 81 and should be a valid number");if(o)throw new Error("No value may exceed 9 or be less than 1 and should be a valid number")}catch(t){throw t}}validateGrid(t){try{this.validateHorizontalRows(t),this.validateVerticalRows(t)}catch(t){throw t}}validateHorizontalRows(t){try{for(let e=0;e<this.rowLength;e++)if(P.getHorizontalRowByRowIndex(t,e).map((t=>t.value)).reduce(this.rowReducer)!==this.totalRowValue)throw new Error("Invalid horizontal row found, index "+e)}catch(t){throw t}}validateVerticalRows(t){try{for(let e=0;e<this.rowLength;e++)if(P.getVerticalRowByRowIndex(t,e).map((t=>t.value)).reduce(this.rowReducer)!==this.totalRowValue)throw new Error("Invalid vertical row found, index "+e)}catch(t){throw t}}validateSubgrids(t){try{for(let e=0;e<this.rowLength;e++)if(P.getSubgridBySubgridIndex(t,e).map((t=>t.value)).reduce(this.rowReducer)!==this.totalRowValue)throw new Error("Invalid subgrid found, index "+e)}catch(t){throw t}}rowReducer(t,e){return t+e}maxValueReducer(t,e,r,n=0){return t?t=NaN!==Number(e)&&Number(e)<=r&&Number(e)>=n:t}}class A{constructor(t){const e=new T,r=new _;try{r.validateStartGrid(t)}catch(t){return void console.error(t)}this.grid=e.create(t)}getGrid(){return this.grid}}let F=0,H=0;const M=new Map,V=new Map,$=((t,e,r)=>(...n)=>new Promise(((o,i)=>{let u=F++,s=0,a=n.length,c=[o,i];for(M.set(u,c);s<a;s++)if("function"==typeof n[s]){const t=H++;V.set(t,n[s]),n[s]=[e+".cb",t],(c[2]=c[2]||[]).push(t)}const l=t=>t.postMessage([e,u,r,n],n.filter((t=>t instanceof ArrayBuffer)));t.then?t.then(l):l(t)})))(((t,e,n)=>{const o=new Worker(t,{name:e});return o.addEventListener("message",(({data:t})=>{if(t){const e=t[0],o=t[1],i=t[2];if(e===n){const e=t[3],[n,u,s]=M.get(o);if(M.delete(o),e){const t=e.isError?Object.assign(new Error(e.value.message),e.value):e.value;r(t),u(t)}else s&&s.forEach((t=>V.delete(t))),n(i)}else if(e===n+".cb")try{V.get(o)(...i)}catch(t){r(t)}}})),o})(new URL("p-93b2dd63.js",import.meta.url).href,"sudoku.worker","stencil.sudoku.worker"),"stencil.sudoku.worker","solveSudoku"),z="0=5&1=3&4=7&9=6&12=1&13=9&14=5&19=9&20=8&25=6&27=8&31=6&35=3&36=4&39=8&41=3&44=1&45=7&49=2&53=6&55=6&60=2&61=8&66=4&67=1&68=9&71=5&76=8&79=7&80=9",L=class{constructor(e){t(this,e),this.cycles=0,this.cellValues=B.getParsed(z)}componentWillLoad(){const t=new A(z);this.grid=t.getGrid()}onEditModeChange(){this.editMode=!this.editMode}onCellChange(t,e){this.cellValues[t]=e||void 0,window.history.replaceState({},"",`${window.location.pathname}?${B.stringify(this.cellValues)}`)}async solveSudoku(){$(this.grid,(t=>{this.cycles=t.cycles,this.grid=t.grid})).catch((t=>{console.trace(t),this.error=t}))}render(){return e(n,null,I.isDevelopment&&e("label",null,e("input",{type:"checkbox",onChange:()=>this.onEditModeChange(),checked:this.editMode}),"Edit mode"),e("br",null),e("button",{onClick:()=>this.solveSudoku()},"Solve"),e("br",null),e("br",null),"Total cycles: ",this.cycles,e("div",{class:"sudoku-grid"},this.grid.map(((t,r)=>e("div",{class:"sudoku-grid__cell "+(t.isStaticValue?"sudoku-grid__cell--static":""),"data-cell":r,"data-grid":t.subgrid},this.editMode?e("input",{type:"text",onChange:t=>this.onCellChange(r,t.currentTarget.value),value:t.value}):t.value)))),this.error&&e("div",{class:"sudoku-grid__error"},this.error))}};export{o as app_root,L as sudoku_grid}